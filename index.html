<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <title>Dog Therhappy – Médiation canine en ville</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description"
    content="Dog Therhappy est une association de médiation canine qui crée du lien et apaise le quotidien au cœur de la ville.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="logo">
        <a href="#top">Dog Therhappy</a>
      </div>

      <!-- Mobile toggle (checkbox) -->
      <input id="nav-toggle" class="nav-toggle" type="checkbox" aria-hidden="true">
      <label for="nav-toggle" class="nav-toggle-label" aria-hidden="false" aria-controls="main-nav">
        <span class="hamburger" aria-hidden="true"></span>
        <span class="sr-only">Menu</span>
      </label>

      <nav id="main-nav" class="main-nav" aria-label="Navigation principale">
        <ul>
          <li><a href="#mediation">La médiation animale</a></li>
          <li><a href="#pour-qui">Pour qui ?</a></li>
          <li><a href="#espace-partage">Espace de partage</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="top">
    <!-- HERO IMMERSIF -->
    <section class="hero" aria-labelledby="hero-title">
      <!-- Image de fond gérée en CSS via .hero -->
      <div class="hero-overlay">
        <div class="hero-inner">
          <!-- Double cercle respiration (structure) -->
          <div class="hero-visual">
            <div class="hero-circles" aria-hidden="true">
              <span class="circle circle-inner"></span>
              <span class="circle circle-outer"></span>
            </div>
          </div>

          <!-- Contenu texte centré -->
          <div class="hero-content">
            <p class="hero-label">
              Association de médiation animale en ville
            </p>

            <h1 id="hero-title" class="hero-title">
              Dog Therhappy
            </h1>

            <p class="hero-subtitle">
              La médiation canine qui crée du lien et apaise le quotidien au cœur de la ville.
            </p>

            <div class="hero-buttons">
              <a href="#mediation" class="btn btn-primary">
                Découvrir la médiation animale
              </a>
              <a href="#contact" class="btn btn-secondary">
                Nous contacter
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SQUELETTE DES AUTRES SECTIONS (vides pour l’instant) -->

    <section id="mediation" class="section section-mediation">
      <div class="container">
        <h2>La médiation animale</h2>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus
          luctus urna sed urna ultricies ac tempor dui sagittis. In condimentum
          facilisis porta. Sed nec diam eu diam mattis viverra. Nulla fringilla,
          orci ac euismod semper, magna diam porttitor mauris, quis sollicitudin
          sapien justo in libero.
        </p>

        <p>
          Integer lacinia sollicitudin massa. Cras metus. Sed aliquet risus a tortor.
          Integer id quam. Morbi mi. Quisque nisl felis, venenatis tristique,
          dignissim in, ultrices sit amet, augue.
        </p>
      </div>
    </section>

    <section id="pour-qui" class="section section-pour-qui">
      <div class="container">
        <h2>Pour qui intervenons-nous&nbsp;?</h2>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus
          imperdiet, nulla et dictum interdum, nisi lorem egestas odio, vitae
          scelerisque enim ligula venenatis dolor.
        </p>

        <div class="cards">
          <div class="card">
            <h3>Écoles & établissements</h3>
            <p>Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat.
            </p>
          </div>
          <div class="card">
            <h3>Espaces publics</h3>
            <p>Duis arcu tortor, suscipit eget, imperdiet nec, imperdiet iaculis, ipsum.</p>
          </div>
          <div class="card">
            <h3>Structures sociales</h3>
            <p>Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="espace-partage" class="section section-espace-partage">
      <div class="container">
        <h2>Espace de partage</h2>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laboriosam,
          voluptas. Sed ut perspiciatis unde omnis iste natus error sit voluptatem
          accusantium doloremque laudantium, totam rem aperiam.
        </p>

        <p>
          Nunc nonummy metus. Vestibulum volutpat pretium libero. Cras id dui.
          Aenean ut eros et nisl sagittis vestibulum. Nullam nulla eros, ultricies sit amet, nonummy id, imperdiet
          feugiat, pede.
        </p>
      </div>
    </section>

    <section id="contact" class="section section-contact">
      <div class="container">
        <h2>Contact</h2>
        <p>
          Pour toute demande d'information ou réservation d'intervention, envoyez-nous
          un message via le formulaire ci-dessous ou par e-mail. Nous répondons
          généralement sous 48 heures.
        </p>
        <form class="contact-form" novalidate>
          <div class="form-grid">
            <div class="form-row">
              <label for="name">Nom / Prénom</label>
              <input type="text" id="name" name="name" placeholder="Votre nom" required>
            </div>

            <div class="form-row">
              <label for="email">Adresse e-mail</label>
              <input type="email" id="email" name="email" placeholder="adresse@exemple.com" required>
            </div>
          </div>

          <div class="form-row">
            <label for="message">Message</label>
            <textarea id="message" name="message" rows="6" placeholder="Décrivez votre demande..." required></textarea>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary">
              Envoyer
            </button>
          </div>
        </form>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <p>© Dog Therhappy – Association de médiation animale</p>
      <nav class="footer-nav" aria-label="Pied de page">
        <a href="#" id="back-to-top">Retour en haut</a>
        <!-- <a href="/mentions-legales">Mentions légales</a> -->
      </nav>
    </div>
  </footer>
  <script>
    // Ensure the mobile nav-toggle isn't left checked by mobile emulators/plugins
    // Reset the checkbox on initial load/pageshow so the menu doesn't open automatically.
    (function () {
      const toggle = document.getElementById('nav-toggle');
      const nav = document.getElementById('main-nav');
      if (!toggle) return;

      function resetToggle() {
        if (toggle.checked) {
          toggle.checked = false;
          toggle.setAttribute('aria-expanded', 'false');
          if (nav) nav.setAttribute('aria-hidden', 'true');
        }
      }

      // Reset immediately and when returning from bfcache
      resetToggle();
      window.addEventListener('pageshow', resetToggle);

      // If the viewport changes to desktop width, make sure the toggle is closed
      window.addEventListener('resize', () => {
        if (window.innerWidth > 768 && toggle.checked) {
          toggle.checked = false;
          toggle.setAttribute('aria-expanded', 'false');
          if (nav) nav.setAttribute('aria-hidden', 'false');
        }
      });
    })();

  </script>
  <script>
    // Toggle header visibility once the hero is scrolled past.
    (function () {
      const header = document.querySelector('.site-header');
      const hero = document.querySelector('.hero');
      const nav = document.getElementById('main-nav');
      const toggle = document.getElementById('nav-toggle');
      if (!header || !hero || !nav || !toggle) return;

      const logo = document.querySelector('.logo');

      function updateNavAria(isHeroInView) {
        // nav should be hidden from assistive tech while hero in view and toggle is not checked
        const shouldHide = isHeroInView && !toggle.checked;
        nav.setAttribute('aria-hidden', shouldHide ? 'true' : 'false');
        // hide logo from AT while hero in view (matches visual state)
        if (logo) logo.setAttribute('aria-hidden', shouldHide ? 'true' : 'false');
      }

      // initial state based on hero position
      const heroRect = hero.getBoundingClientRect();
      const heroVisible = !(heroRect.bottom <= 0 || heroRect.top >= window.innerHeight);
      updateNavAria(heroVisible);

      const io = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (!entry.isIntersecting) {
            header.classList.add('header--visible');
            updateNavAria(false);
          } else {
            header.classList.remove('header--visible');
            updateNavAria(true);
          }
        });
      }, { threshold: 0 });

      io.observe(hero);

      // manage aria-expanded, focus, and close behaviors when the hamburger is toggled
      toggle.setAttribute('aria-expanded', 'false');

      function closeMenu() {
        toggle.checked = false;
        toggle.setAttribute('aria-expanded', 'false');
        // hide from assistive tech if hero still visible
        const rect = hero.getBoundingClientRect();
        const stillVisible = !(rect.bottom <= 0 || rect.top >= window.innerHeight);
        updateNavAria(stillVisible);
        // return focus to the hamburger
        toggle.focus();
      }

      toggle.addEventListener('change', () => {
        const expanded = toggle.checked;
        toggle.setAttribute('aria-expanded', String(expanded));
        if (expanded) {
          // reveal nav to AT and move focus to first link
          nav.setAttribute('aria-hidden', 'false');
          const firstLink = nav.querySelector('a');
          if (firstLink) firstLink.focus();
        } else {
          // if hero still in view, hide nav from assistive tech again
          const rect = hero.getBoundingClientRect();
          const stillVisible = !(rect.bottom <= 0 || rect.top >= window.innerHeight);
          updateNavAria(stillVisible);
        }
      });

      // close the menu when any nav link is clicked (mobile behavior)
      if (nav) {
        const links = nav.querySelectorAll('a');
        links.forEach(link => {
          link.addEventListener('click', () => {
            if (toggle.checked) {
              // close immediately to restore page view and accessibility state
              closeMenu();
            }
          });
        });
      }

      // close on Escape
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && toggle.checked) {
          closeMenu();
        }
      });

      // close on outside click when open
      document.addEventListener('click', (e) => {
        if (!toggle.checked) return;
        const clickedInside = header.contains(e.target);
        if (!clickedInside) closeMenu();
      });
    })();
  </script>
  <script>
    // Smooth back-to-top without changing the URL hash
    (function () {
      const btn = document.getElementById('back-to-top');
      if (!btn) return;
      btn.addEventListener('click', function (e) {
        e.preventDefault();
        window.scrollTo({ top: 0, behavior: 'smooth' });
        // ensure no hash is added to the URL
        if (window.location.hash === '#top') {
          history.replaceState(null, '', window.location.pathname + window.location.search);
        }
      });
    })();
  </script>
</body>

</html>
